# 指针进阶——大纲

## 1.数组与指针

### a.指针与数组的关系

​	① 数组是一块内存**连续**的数据，**数组名**代表**首地址**

​	② 指针是一个指向内存空间的**变量**

​	对于数组来说，数组的首地址可以用指针来表示操作：

```c++ 
	int a[10];
	int *p, n;
	p = a;
```

​	因此对于数组第一个元素的取值可以用几种方法：

```c++
	n = a[0];
	n = *p;
	n = p[0];
	n = *(p + 0);
```

​	**指针与数组的不同点**

​	数组是由编译器直接分配的空间，数组的变量名不能再赋值

​	而指针是一个作为变量在大多数变量	可以自由赋值的情况下可以重复赋值

```c++
	p = a;	//正确
	a = p;	//错误
```

​	**注意：**虽然数组名代表着数组的首地址但是还是与指针不同，数组名仅仅只可作为数组首地址去使用。

--- ---

**例题（关于数组首地址的使用与用指针方法的数组使用） * 1**

**sizeof(a) 与 sizeof(*p)问题**

--- ---

### b.数组指针与指针数组的辨别

​	① 指针数组本质上就是一个**数组**，但是数组中存放的所有元素都是指针变量

​	② 数组指针本质上是一个**指针**，指针指向的是一个数组

​	**判断时指针数组还是数组指针**

```c++
	int *p[5];
	int (*p)[5];	
	int *(p[5]);
```

​	与符号的优先级有关系，通过符号的优先级来判断表达式中的变量名`p`与谁先结合。

​	符号[]优先级高于*

​	因此`int *p[5];`与`int *(p[5]);`本质上是一个数组因此它是指针数组，数组中存放指针变量

​	而`int(*p)[5];`则本质上是一个指针而指针指向的是一个数组。

--- ---

***选讲：数组指针的用法***

---

## 2.指针与结构体的关系

​	① 声明指向结构类型的指针

```c++
	struct mystruct{
        int a;
        int b;
        int c;
    };
	struct mystruct ms = {1, 2, 3};
	struct mystruct *ps = &ms; // 声明了一个指向结构体对象的指针，类型是 mystruct* 指向类型是mystruct
	int *p = (int*)&ss; // 声明了一个指向结构对象的指针，但是是指向ms的地址。
```

 ② 通过指针ps访问成员变量

```c++
	ps -> a;	//运用指向运算符，或者用(*ps).a;
	ps -> b;
	ps -> c;
```

③ 用指针p访问成员变量

```c++
	*p;			// a
	*(p + 1);	// b
    *(p + 2);	// c
```

--- ---

**略讲**

--- ---

## 3.函数与指针的关系

​	① 可以把一个指针声明成为一个指向函数的指针**（略讲）**

```c++
	int fun(char *, int);
	int (*pfun)(char *, int);
	pfun = fun;
	int a = (*pfun)("abcdef", 7);	//通过函数指针调用函数
```



​	② 可以把指针作为函数的形参，在调用的时候，可以用指针表达式作为**实参**

```c++
     int fun(char *s)
    {
        int num=0;
        for(int i=0;;)
        {
            num+=*s;s++;
        }
        return num;
    }
	int fun(char *);
    int a;
    char str[] = "abcdefghijklmn";
    a = fun(str);
```

## 4.指针的安全问题

```c++
    char s = 'a';
    int *p;
    p = (int *)&s;
    *p = 1234；
```

指针p 是一个int *类型的指针，它指向的类型是int。它指向的地址就是s 的首地址。在32 位程序中，s 占一个字节，int 类型占四个字节。最后一条语句不但改变了s 所占的一个字节，还把和s 相临的高地址方向的三个字节也改变了。这三个字节是干什么的？只有编译程序知道，而写程序的人是不太可能知道的。也许这三个字节里存储了非常重要的数据，也许这三个字节里正好是程序的一条代码，但是因为输入类型的错误，这三个字节的值被改变了,这会造成崩溃性的错误。

因此在运用指针里还是要注意地址所对应的数据类型，否则会发生很严重的后果。



## 5.对于指针地址思想的补充完善

---

**此内容根据习题进行完善，主要讲述关于实参形参的问题**

---

